<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ«ìì•¼êµ¬</title>
</head>
<body>
    <form id="form">
        <input type="text" id="input">
        <button>í™•ì¸</button>
    </form>  <!--form ì—ë‹¤ê°€ addEventListener ë„£ì„ ìˆ˜ìˆë‹¤ -->
    <div id="logs"></div>
    <script>
//ğŸ˜‰Math.random()í™œìš©í•˜ê¸° 
//ì¼ë°˜ Math.random ì€ 0~1 ì‚¬ì´ê°’(ì†Œìˆ˜ê°’)ìœ¼ë¡œ ë‚˜ì˜´. // 0 <= Math.random < 1
//ì •ìˆ˜ë¡œ ë³€í™˜í•˜ê¸°ìœ„í•´ì„œì˜ ì ˆì°¨ 
//	Math.random() * 9  // 0ì´ìƒ 9ë¯¸ë§Œì´ ëœë‹¤.// 0 <= Math.random * 9 < 9
//	1 <= Math.random * 9 + 1 < 10  //1ë¥¼ ë”í•´ì¤˜ì„œ 1~ 9ê¹Œì§€ (1ë¶€í„° 10ë¯¸ë§Œ) ì†Œìˆ˜ê°’ìœ¼ë¡œ ë‚˜íƒ€ë‚¨.
//ì†Œìˆ˜ì ë“¤ì„ ë‚´ë¦¬ëŠ” ë°©ë²• 
//	Math.floor(Math.random() * 9 + 1) //ì •ìˆ˜ê°’ìœ¼ë¡œ ë‚˜ì˜´
////ë°˜ì˜¬ë¦¼í•˜ëŠ” ë°©ë²• : Math.round

//ğŸ¤¨ìˆ«ì 4ê°œë¥¼ ëœë¤í•˜ê²Œ ì–´ë–»ê²Œ ë½‘ì•„ë³¼ê¹Œ ?  //ì•Œê³ ë¦¬ì¦˜ì´ í•„ìš”í•˜ë‹·+_+!//ìˆœì„œë„ë„ ì•Œê³ ë¦¬ì¦˜// ì •í™•í•˜ê²Œ ë¹ ë¥´ê²Œ// 
//	ì‚¬ëŒì´ë¼ë©´ ì–´ë–»ê²Œ í–ˆì„ê¹Œ ? _ë¼ê³ ìƒê°í•´ë³´ê¸°! ì •ë‹µì€ ë§ì§€ë§Œ íš¨ìœ¨ì„±ì€ ë–¨ì–´ì§„ë‹¤ : ì•Œê³ ë¦¬ì¦˜ì€ ë‚˜ì¤‘ì— ë”°ë¡œ ìµí˜€ì•¼í•œë‹¤.
//    ìˆ«ì 30ì´ ë„˜ì–´ê°€ëŠ” ë°°ìš°ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œí•˜ê³  30ì•„ë˜ëŠ” ì‚¬ëŒì´ë¼ë©´? ì´ë¼ê³  ìƒê°í•˜ê³  ì§œë³´ì.
//							ğŸ¤—ë°˜ì˜¬ë¦¼ : round // ìˆ«ìë‚´ë¦¼ : floor //ìˆ«ìì˜¬ë¦¼ : ceilì”°ğŸ¤—
//		ğŸ‘» Math.floor(Math.random() * 9 + 1)  // x = {1, 2, 3, 4, 5, 6, 7, 8, 9} 
//ğŸ«¤Math.random()ì€ ë¬´ì‘ìœ„ê°€ ì•„ë‹ˆë‹¤ ? // ì•”í˜¸í•™ì ìœ¼ë¡œ ì™„ì „í•œ ë¬´ì‘ìœ„ëŠ” ì•„ë‹ˆê¸°ì— ë³´ì•ˆê³¼ ê´€ë ¨ëœ ì‘ì—…ì— ì“°ì¼ ì‹œ ìœ„í—˜.ğŸ˜±
// ëŒ€ì²´í•˜ê¸° ìœ„í•´   ğŸ‘» Window.crypto.getRandomValues()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

        const $input = document.querySelector('#input'); //HTMl íƒœê·¸ì“¸ë•Œ ì•Œì•„ë³´ê¸°ì‰½ê²Œ $ Tag T 
        const $form = document.querySelector('#form');
        const $logs = document.querySelector('#logs');
//ğŸ‘‰ ëœë¤ ìˆ«ì 4ê°œ ë‚˜ì˜¤ê²Œí•˜ê¸°!
				const numbers = []; //[1, 2, 3, 4, 5, 6, 7, 8, 9]
				//ë‹¨ìˆœíˆ ê°’ë“¤ë§Œ ëª¨ì•„ë‘˜ë•Œ ë°°ì—´[]ì‚¬ìš© , ê°ê°ì˜ ê°’ì— ì´ë¦„ì„ ë¶™ì—¬ì•¼í•  ë•Œ ê°ì²´ë¦¬í„°ëŸ´ ì¤‘ê´„í˜¸{}
				for (let n = 1; n <= 8; n += 1) {  
					//forë¬¸ì„ whaileë¬¸ìœ¼ë¡œ ìƒí˜¸ ì „í™˜ì‹œí‚¤ëŠ” ì—°ìŠµí•˜ê¸°!!//ifë¬¸ ë³´ë©´ swichë¡œ ë°”ê¾¸ê±°ë‚˜ ì‚¼í•­ì—°ì‚°ìë¡œ ë°”ê¿”ë³´ê¸°ì—°ìŠµí•˜ì!
					numbers.push(n + 1);  //ë°˜ë³µë¬¸ì€ 0ë¶€í„° ì‹œì‘ëŠ” ê²½ìš°ê°€ ë§ì•„ 'n + 1'
				}
				const answer = [];// [4]
				for (let n = 0; n < 4; n += 1) {   // ë„¤ ë²ˆ ë°˜ë³µ
				//const index = Math.floor(Math.random() * 9); //0~8ì •ìˆ˜1ï¸âƒ£
					const index = Math.floor(Math.random() * (numbers.length)); 
					//(9 - n)ì•Œê³ ë¦¬ì¦˜ì˜ ë¬¸ì œ í•´ê²°!ğŸ˜2ï¸âƒ£
																							// * (9 - n)ë¡œ ì“¸ ìˆ˜ ìˆë‹¤.
					answer.push(numbers[index]); // í•˜ë‚˜ ë‚´ë³´ë‚´ë©´,
					numbers.splice(index, 1);    // í•˜ë‚˜ ë¹¼ì£¼ê¸°. 4ë²ˆ ë°˜ë³µ
				}      //ì´ ì•Œê³ ë¦¬ì¦˜ì—” ë¬¸ì œê°€ ìˆë‹¤!ğŸ§1ï¸âƒ£
				//	index : 0  1  2  3  4  5  6  7  8
				// numbers [1, 5, 6, 7, 8, 9]  // splice...
				// answer [3, 2, 4, undefined] // index 8ì„ ë½‘ëŠ”ë‹¤ë©´ êµ¬ë©ì´ìƒê¹€ undefined
				// ë ê°’ë“¤ë¡œ ê²€ì¦í•˜ë©´ ì¢‹ë‹¤.
				console.log(answer);
				
				// $form.addEventListener('submit', (event) => {
				// 	event.preventDefault(); // ê¹œë°•ì´ëŠ” ê¸°ë³¸ë™ì‘ ë§‰ê¸°(ìƒˆë¡œê³ ì¹¨ ë§‰ê¸°)
				// 	console.log('ì„œë¸Œë°‹');//,eventë„£ì–´ì„œ ê°ì²´ í™•ì¸ê°€ëŠ¥
				// }); //formì•ˆì— buttonì„ ëˆ„ë¥´ë©´ submití˜¸ì¶œì´ ëœë‹¤.

				const tries = [];
				function checkInput(input) {
					if (input.length !== 4) {  //'ê¸¸ì´'ëŠ” 4ê°€ ì•„ë‹Œê°€ ?
						return alert('4ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
					}
					if (new Set(input).size !==4){ //'ì¤‘ë³µ'ëœ ìˆ«ìê°€ ìˆëŠ”ê°€ ?
						return alert('ì¤‘ë³µë˜ì§€ ì•Šê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
					}
					if (tries.includes(input)) { //'ì´ë¯¸ ì‹œë„'í•œ ê°’ì€ ì•„ë‹Œê°€ ?
						return alert('ì´ë¯¸ ì‹œë„í•œ ê°’ì…ë‹ˆë‹¤.')
					}													//ğŸ‘‰ê²€ì¦ì‹¤íŒ¨í•œ ê²½ìš°ì—ëŠ” ì „ë¶€ undefined
					return true;
				}  // ê²€ì‚¬í•˜ëŠ” ì½”ë“œ 

				$form.addEventListener('submit', (event) => {  //êµ¬ë¶„í•˜ê¸°ìœ„í•´ì„œ ë³€ìˆ˜$ë‚˜ ì–¸ë”ìŠ¤ì½”ì–´_ ë¶™ì´ê¸°ë„ í•¨.
					event.preventDefault();
					const value = $input.value;  
					$input.value = ''; // ë‹¤ìŒê°’ í¸íˆ ì…ë ¥í•˜ë¼ê³  ì§€ì›Œì£¼ëŠ” ì„¼ìŠ¤!
					// const valid = checkInput(value); // ê²€ì‚¬í•˜ëŠ” ì½”ë“œ 
					// if (checkInput(value)) {   // trueëŠ” ifë¬¸ ì•ˆì— ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤.  //ê²€ì‚¬ì½”ë“œ
					if (!checkInput(value)) {
						return;
					}
					//ì…ë ¥ê°’ ë¬¸ì œì—†ìŒ
						if(answer.join('') === value) {   // ê°™ìœ¼ë©´ í™ˆëŸ°!
							//join(): ,ì»´ë§ˆë‚˜ì˜´ //join(''): ì»´ë§ˆì—†ì´ì¶œë ¥ //join(':'): 1:2:3:4 ì´ëŸ°ì‹ìœ¼ë¡œ ì¶œë ¥ë¨.
							$logs.textContent = 'í™ˆëŸ°!';
							return;
						}
						if (tries.length >= 9) {  //ì‹œë„ 10ë²ˆì´ìƒì‹œ íŒ¨ë°°! 0~9 =10ë²ˆ.
							const message = document.createTextNode(`íŒ¨ë°°! ì •ë‹µì€ ${answer.join('')}`);
							$logs.appendChild(message);
							return;
						}
						//ëª‡ ìŠ¤íŠ¸ë¼ì´í¬ ëª‡ ë³¼ì¸ì§€ ê²€ì‚¬
						let strike = 0;
						let ball = 0;
						//
						for (let i = 0; i < answer.length; i++) {
							const index = value.indexOf(answer[i]);
							if (index > -1) { //ì¼ì¹˜í•˜ëŠ” ìˆ«ì ë°œê²¬
								if (index === i) { //ìë¦¿ìˆ˜ë„ ê°™ìŒ
									strike += 1;
								}else { //ìˆ«ìë§Œ ê°™ìŒ
									ball += 1;
								}
								}
							}
					$logs.append(`${value}: ${strike} ìŠ¤íŠ¸ë¼ì´í¬ ${ball} ë³¼`,document.createElement('br'));
					tries.push(value); // 'ì´ë¯¸ ì‹œë„'í•œ ê°’ì…ë‹ˆë‹¤!!! //ê°’ì„ ê¸°ë¡í•˜ë©´ì„œ ëª‡ë²ˆì‹œë„í–ˆëŠ”ì§€ ì„¸ëŠ”ê²ƒ
				});
    </script>    
</body>
</html>

